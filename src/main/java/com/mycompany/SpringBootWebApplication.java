package com.mycompany;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import org.springframework.scheduling.annotation.EnableAsync;

import com.mycompany.entity.Customer;
import com.mycompany.entity.DeliveryMan;
import com.mycompany.service.CustomerService;
import com.mycompany.service.DeliveryManService;

@SpringBootApplication
@EnableAsync
public class SpringBootWebApplication
{
	protected static final Logger logger = LoggerFactory.getLogger( SpringBootWebApplication.class );

	public static final String SEPERATOR = ",";

	@Autowired
	private CustomerService customerService = null;
	@Autowired
	private DeliveryManService deliveryManService = null;

	public static void main(String[] args) {
		SpringApplication.run( SpringBootWebApplication.class, args );
	}

	@Bean
	public InitializingBean initDatabaseData() {
		return new InitializingBean() {

			public void afterPropertiesSet() throws Exception {
				customerService.delete();
				deliveryManService.delete();

				DeliveryMan deliveryA = new DeliveryMan( "employee1", "employee1", "運貨人員A", "25.03372310", "121.43363040" );
				DeliveryMan deliveryB = new DeliveryMan( "employee2", "employee2", "運貨人員B", "25.03372310", "121.43363040" );
				DeliveryMan deliveryC = new DeliveryMan( "employee3", "employee3", "運貨人員C", "25.03372310", "121.43363040" );

				deliveryManService.save( deliveryA );
				deliveryManService.save( deliveryB );
				deliveryManService.save( deliveryC );

				deliveryA = deliveryManService.findDeliveryManByUsernameAndPassword( "employee1", "employee1" );
				deliveryB = deliveryManService.findDeliveryManByUsernameAndPassword( "employee2", "employee2" );
				deliveryC = deliveryManService.findDeliveryManByUsernameAndPassword( "employee3", "employee3" );
				
				Customer customerA = new Customer( "user1", "user1", "消費者A", "屏東縣車城鄉後灣村後灣路2號", deliveryA );
//				25.03372310,121.43363040, 47
//				25.03256540,121.43407960, 201
//				25.02859460,121.42152300, 451
//				25.04514880,121.39667220, 108
//				25.04862330,121.38615370, 367
//				25.06453960,121.36880100, 138
//				25.06957710,121.37127690, 225
//				25.07589600,121.36411250, 126
//				25.08028630,121.35472740, 43
//				25.08227650,121.35125370, 413
//				25.10358970,121.32848900, 421
//				25.12036440,121.29588740, 216
//				25.11787510,121.26651640, 373
//				25.10358950,121.21239980, 1087
//				25.04066260,121.07253380, 80
//				25.03717590,121.07118510, 37
//				25.03462140,121.07136320, 24
//				25.03342270,121.07224320, 48
//				25.03087430,121.07029610, 2435
//				24.80679730,120.91825030, 3329
//				24.50637730,120.68898160, 297
//				24.48407280,120.67578400, 95
//				24.48337320,120.66874730, 607
//				24.43323810,120.63240050, 49
//				24.43063040,120.62868310, 35
//				24.42765570,120.62603850, 15
//				24.42656250,120.62446520, 4
//				24.42623770,120.62382530, 30
//				24.42401180,120.62033960, 149
//				24.40793580,120.61458850, 20
//				24.40555300,120.61347520, 11
//				24.40427270,120.61263900, 96
//				24.39193990,120.60261450, 53
//				24.39290420,120.59940640, 50
//				24.38933340,120.59671960, 97
//				24.38483510,120.59367480, 106
//				24.37612350,120.59097710, 40
//				24.37273750,120.58773090, 23
//				24.37342620,120.58608480, 29
//				24.37157940,120.58654350, 114
//				24.35858010,120.58487020, 30
//				24.35492700,120.58255860, 43
//				24.35048650,120.57839010, 6
//				24.35011360,120.57802750, 18
//				24.34834830,120.57639500, 114
//				24.33690200,120.57005010, 134
//				24.31687910,120.56388540, 235
//				24.29637930,120.55270140, 62
//				24.29387510,120.55201550, 1051
//				24.19851200,120.51364030, 444
//				24.16115720,120.48698560, 1174
//				24.06970780,120.43843540, 194
//				24.07603530,120.41886060, 884
//				24.01330630,120.38696780, 574
//				23.95743300,120.38189830, 653
//				23.89800390,120.37009450, 58
//				23.89630630,120.36951850, 112
//				23.88874790,120.37167130, 150
//				23.87200240,120.37776200, 163
//				23.85327050,120.37567430, 253
//				23.84754760,120.39986170, 534
//				23.78732530,120.37003240, 1267
//				23.65951360,120.31261420, 182
//				23.64382270,120.31258230, 577
//				23.57787830,120.29818190, 168
//				23.56964460,120.29215720, 351
//				23.52961670,120.28194810, 1760
//				23.34251530,120.25326010, 42
//				23.34008730,120.25074240, 61
//				23.33354540,120.25050210, 15
//				23.33300600,120.24986140, 228
//				23.31112280,120.26392420, 354
//				23.30651640,120.29350500, 395
//				23.26871480,120.31025640, 26
//				23.26903420,120.31302060, 79
//				23.26015540,120.31260650, 1303
//				23.12727710,120.31865920, 597
//				23.09669610,120.35966780, 161
//				23.07877000,120.36797980, 457
//				23.05349990,120.41517270, 276
//				23.04671400,120.44521420, 331
//				23.03258810,120.47508080, 880
//				22.92376860,120.45406960, 571
//				22.89152410,120.48332370, 200
//				22.87917100,120.48312130, 897
//				22.78710110,120.50562550, 37
//				22.78625590,120.50208610, 1124
//				22.72288450,120.61630810, 6
//				22.72270580,120.61615480, 198
//				22.71002510,120.63848730, 76
//				22.70512790,120.63979000, 147
//				22.69667520,120.63042820, 2829
//				22.36872730,120.60714130, 2057
//				22.09048610,120.71744420, 295
//				22.06543070,120.70879340, 96
//				22.05237510,120.70475970, 108
//				22.04306730,120.70126400, 27
//				22.04238040,120.69982040, 0
				Customer customerB = new Customer( "user2", "user2", "消費者B", "南投縣水里鄉55344中山路一段515號", deliveryB );
//				25.03372310,121.43363040, 47
//				25.03256540,121.43407960, 183
//				25.03383860,121.44200830, 137
//				25.02533840,121.44224450, 38
//				25.02298530,121.44086810, 32
//				25.02254480,121.44131190, 254
//				25.00062060,121.43538320, 241
//				24.97817390,121.42713810, 309
//				24.96914250,121.39671570, 62
//				24.96855980,121.39154750, 393
//				24.94969180,121.35270230, 80
//				24.95174350,121.35187720, 121
//				24.94799100,121.34113490, 84
//				24.94309480,121.33951310, 282
//				24.93395430,121.32094780, 615
//				24.89180910,121.27890820, 12
//				24.89187040,121.27879880, 20
//				24.89210710,121.27840210, 977
//				24.82699190,121.24312480, 384
//				24.82756230,121.20559480, 3622
//				24.65013520,120.95429380, 4482
//				24.26862650,120.82325680, 76
//				24.26324300,120.82518930, 89
//				24.26165260,120.82274010, 1251
//				24.16088420,120.86033060, 1829
//				24.06545230,120.87618040, 230
//				24.04652640,120.86182050, 164
//				24.03768210,120.85392300, 158
//				24.02572860,120.84451590, 426
//				23.98328390,120.87119060, 1463
//				23.88382930,120.87418860, 1003
//				23.81447880,120.85048000, 67
//				23.81278510,120.85047450, 0
				Customer customerC = new Customer( "user3", "user3", "消費者C", "花蓮縣秀林鄉富世村富世291號", deliveryC );
//				25.03372310,121.43363040, 47
//				25.03256540,121.43407960, 535
//				25.03878970,121.46025450, 12
//				25.03863550,121.46027230, 459
//				25.01089890,121.47871650, 114
//				25.00531460,121.48405220, 108
//				25.00017520,121.48502910, 122
//				24.99521660,121.48532040, 30
//				24.99454030,121.48612240, 142
//				24.99384400,121.49473320, 136
//				24.99346100,121.50338040, 371
//				24.98968290,121.52786630, 9
//				24.98930420,121.52888170, 376
//				24.96131180,121.53885150, 5063
//				24.84656300,121.79319550, 34
//				24.84535430,121.79503790, 12
//				24.84621350,121.79553290, 109
//				24.84340250,121.80417210, 139
//				24.84739210,121.81295640, 52
//				24.84587810,121.81467920, 110
//				24.84464340,121.82324200, 2059
//				24.62793180,121.83229640, 460
//				24.59775290,121.85624110, 24
//				24.59772470,121.85511830, 48
//				24.59623060,121.85517450, 29
//				24.59619850,121.85430900, 2525
//				24.46393080,121.79820570, 134
//				24.45947340,121.78135060, 4005
//				24.14989830,121.64466140, 217
//				24.15693810,121.62211520, 28
//				24.15829420,121.62084230, 10
//				24.15860540,121.62102190, 62
//				24.15807200,121.62253950, 0
				customerService.save( customerA );
				customerService.save( customerB );
				customerService.save( customerC );
			}
		};
	}
}
